From 1c0fe46e72b98a96ca91a2c376e14a4964e619f7 Mon Sep 17 00:00:00 2001
From: "Christopher A. Williamson" <home@chrisaw.com>
Date: Wed, 2 Apr 2024 10:45:00 +0000
Subject: [PATCH 1/3] Support PHH and Voltage gamma setting
---
 .../settingslib/display/BrightnessUtils.java        | 13 ++++++++++++-
 1 file changed, 12 insertions(+), 1 deletion(-)

diff --git a/packages/SettingsLib/DisplayUtils/src/com/android/settingslib/display/BrightnessUtils.java b/packages/SettingsLib/DisplayUtils/src/com/android/settingslib/display/BrightnessUtils.java
index 35f01f67..2f823494 100644
--- a/packages/SettingsLib/DisplayUtils/src/com/android/settingslib/display/BrightnessUtils.java
+++ b/packages/SettingsLib/DisplayUtils/src/com/android/settingslib/display/BrightnessUtils.java
@@ -25,9 +25,20 @@ import com.android.internal.display.BrightnessSynchronizer;
 
 public class BrightnessUtils {
 
-    public static final boolean sysUseLowGamma = Boolean.parseBoolean(
+    // Fetch PHH low gamma bool
+    public static final boolean sysUsePhhLowGamma = Boolean.parseBoolean(
+        SystemProperties.get("persist.sys.phh.low_gamma_brightness", "false"));
+
+    // Fetch Voltage low gamma bool
+    public static final boolean sysUseVoltageLowGamma = Boolean.parseBoolean(
         SystemProperties.get("persist.sys.brightness.low.gamma", "false"));
 
+    if(sysUsePhhLowGamma || sysUseVoltageLowGamma) {
+        public static final boolean sysUseLowGamma = true;
+    } else {
+        public static final boolean sysUseLowGamma = false;
+    }
+
     public static final int GAMMA_SPACE_MIN = 0;
     public static final int GAMMA_SPACE_MAX = sysUseLowGamma ? 255 : 65535;
 
--
2.25.1
