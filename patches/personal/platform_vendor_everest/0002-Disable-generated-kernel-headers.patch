From a1e9e24e38ac68e261a9e95368ae8273a0cec370 Mon Sep 17 00:00:00 2001
From: "Christopher A. Williamson" <home@chrisaw.com>
Date: Fri, 2 Aug 2024 13:18:57 +0000
Subject: [PATCH] Disable generated kernel headers

---
 build/soong/Android.bp | 12 ------------
 1 file changed, 12 deletions(-)

diff --git a/build/soong/Android.bp b/build/soong/Android.bp
index 031c4b28..7b24836a 100644
--- a/build/soong/Android.bp
+++ b/build/soong/Android.bp
@@ -18,30 +18,18 @@ bootstrap_go_package {
 }
 
 everest_generator {
     name: "generated_kernel_includes",
 
-    // The headers make command
-    cmd: "$(PATH_OVERRIDE_SOONG) $(KERNEL_MAKE_CMD) $(KERNEL_MAKE_FLAGS) -C $(TARGET_KERNEL_SOURCE) O=$(KERNEL_BUILD_OUT_PREFIX)$(genDir) ARCH=$(KERNEL_ARCH) $(KERNEL_CROSS_COMPILE) headers_install && vendor/everest/tools/clean_headers.sh $(KERNEL_BUILD_OUT_PREFIX)$(genDir)",
-
     // Directories that can be imported by a cc_* module generated_headers property
     export_include_dirs: [
         "usr/audio/include/uapi",
         "usr/include",
         "usr/include/audio",
         "usr/include/audio/include/uapi",
         "usr/techpack/audio/include",
     ],
-
-    // Sources for dependency tracking
-    dep_root: "$(TARGET_KERNEL_SOURCE)",
-    dep_files: [
-        "Makefile",
-        "include/**/*",
-        "arch/$(KERNEL_ARCH)/include/**/*",
-        "techpack/audio/include/**/*",
-    ],
 }
 
 cc_defaults {
     name: "generated_kernel_header_defaults",
     generated_headers: ["generated_kernel_includes"],
-- 
2.45.2
