From d0b89c66764d7e0da2231697f2e44ddd51ecde93 Mon Sep 17 00:00:00 2001
From: "Christopher A. Williamson" <home@chrisaw.com>
Date: Sun, 19 May 2024 00:15:32 +0100
Subject: [PATCH 2/2] Set LOCAL_SDK_VERSIONs to avoid voltage altering apks

---
 FDroid/Android.mk                   | 1 +
 FakeStore/Android.mk                | 1 +
 GmsCore/Android.mk                  | 1 +
 GsfProxy/Android.mk                 | 1 +
 IchnaeaNlpBackend/Android.mk        | 1 +
 NominatimGeocoderBackend/Android.mk | 1 +
 6 files changed, 6 insertions(+)

diff --git a/FDroid/Android.mk b/FDroid/Android.mk
index 3f0430a..d8df1db 100644
--- a/FDroid/Android.mk
+++ b/FDroid/Android.mk
@@ -5,6 +5,7 @@ LOCAL_SRC_FILES := FDroid.apk
 LOCAL_MODULE_CLASS := APPS
 LOCAL_MODULE_SUFFIX := $(COMMON_ANDROID_PACKAGE_SUFFIX)
 LOCAL_CERTIFICATE := PRESIGNED
+LOCAL_SDK_VERSION := current
 # these lines may break builds before 19.1 so make them conditional
 ifneq ($(call math_gt_or_eq, $(PLATFORM_SDK_VERSION), 31),)
 LOCAL_OPTIONAL_USES_LIBRARIES := androidx.window.extensions androidx.window.sidecar
diff --git a/FakeStore/Android.mk b/FakeStore/Android.mk
index 63907ba..ba410e1 100644
--- a/FakeStore/Android.mk
+++ b/FakeStore/Android.mk
@@ -23,5 +23,6 @@ LOCAL_MODULE_SUFFIX := $(COMMON_ANDROID_PACKAGE_SUFFIX)
 LOCAL_CERTIFICATE := PRESIGNED
 LOCAL_REQUIRED_MODULES := privapp-permissions-com.android.vending.xml default-permissions-com.android.vending.xml
 LOCAL_PRODUCT_MODULE := true
+LOCAL_SDK_VERSION := current
 include $(BUILD_PREBUILT)
 
diff --git a/GmsCore/Android.mk b/GmsCore/Android.mk
index 34bc76e..4abb08e 100644
--- a/GmsCore/Android.mk
+++ b/GmsCore/Android.mk
@@ -30,6 +30,7 @@ LOCAL_MODULE_SUFFIX := $(COMMON_ANDROID_PACKAGE_SUFFIX)
 LOCAL_CERTIFICATE := PRESIGNED
 LOCAL_OVERRIDES_PACKAGES := com.qualcomm.location
 LOCAL_REQUIRED_MODULES := privapp-permissions-com.google.android.gms.xml default-permissions-com.google.android.gms.xml sysconfig-com.google.android.gms.xml
+LOCAL_SDK_VERSION := current
 # these lines will break builds before 19.1 so make them conditional
 ifneq ($(call math_gt_or_eq, $(PLATFORM_SDK_VERSION), 31),)
 LOCAL_USES_LIBRARIES := com.android.location.provider
diff --git a/GsfProxy/Android.mk b/GsfProxy/Android.mk
index 248d922..387aeb1 100644
--- a/GsfProxy/Android.mk
+++ b/GsfProxy/Android.mk
@@ -6,4 +6,5 @@ LOCAL_MODULE_CLASS := APPS
 LOCAL_MODULE_SUFFIX := $(COMMON_ANDROID_PACKAGE_SUFFIX)
 LOCAL_CERTIFICATE := PRESIGNED
 LOCAL_PRODUCT_MODULE := true
+LOCAL_SDK_VERSION := current
 include $(BUILD_PREBUILT)
diff --git a/IchnaeaNlpBackend/Android.mk b/IchnaeaNlpBackend/Android.mk
index e98539f..615d7b0 100644
--- a/IchnaeaNlpBackend/Android.mk
+++ b/IchnaeaNlpBackend/Android.mk
@@ -6,4 +6,5 @@ LOCAL_MODULE_CLASS := APPS
 LOCAL_MODULE_SUFFIX := $(COMMON_ANDROID_PACKAGE_SUFFIX)
 LOCAL_CERTIFICATE := PRESIGNED
 LOCAL_PRODUCT_MODULE := true
+LOCAL_SDK_VERSION := current
 include $(BUILD_PREBUILT)
diff --git a/NominatimGeocoderBackend/Android.mk b/NominatimGeocoderBackend/Android.mk
index 1689d20..982f370 100644
--- a/NominatimGeocoderBackend/Android.mk
+++ b/NominatimGeocoderBackend/Android.mk
@@ -6,4 +6,5 @@ LOCAL_MODULE_CLASS := APPS
 LOCAL_MODULE_SUFFIX := $(COMMON_ANDROID_PACKAGE_SUFFIX)
 LOCAL_CERTIFICATE := PRESIGNED
 LOCAL_PRODUCT_MODULE := true
+LOCAL_SDK_VERSION := current
 include $(BUILD_PREBUILT)
-- 
2.44.0
