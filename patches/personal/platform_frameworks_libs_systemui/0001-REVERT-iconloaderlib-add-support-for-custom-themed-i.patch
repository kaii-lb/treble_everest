From 70abf4d5222920cb1f1170892b698e270b3a8cd8 Mon Sep 17 00:00:00 2001
From: "Christopher A. Williamson" <home@chrisaw.com>
Date: Thu, 7 Mar 2024 12:24:10 +0000
Subject: [PATCH 1/1] REVERT: iconloaderlib: add support for custom themed icon
 pack [1/3]

---
 .../com/android/launcher3/icons/IconProvider.java  | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

diff --git a/iconloaderlib/src/com/android/launcher3/icons/IconProvider.java b/iconloaderlib/src/com/android/launcher3/icons/IconProvider.java
index 911342d..b3afa94 100644
--- a/iconloaderlib/src/com/android/launcher3/icons/IconProvider.java
+++ b/iconloaderlib/src/com/android/launcher3/icons/IconProvider.java
@@ -105,9 +105,9 @@ public class IconProvider implements ResourceBasedOverride {
     /**
      * Loads the icon for the provided LauncherActivityInfo
      */
-    public Drawable getIcon(LauncherActivityInfo info, int iconDpi, String themedIconPack) {
+    public Drawable getIcon(LauncherActivityInfo info, int iconDpi) {
         return getIconWithOverrides(info.getApplicationInfo().packageName, iconDpi,
-                () -> info.getIcon(iconDpi), themedIconPack);
+                () -> info.getIcon(iconDpi));
     }
 
     /**
@@ -122,13 +122,13 @@ public class IconProvider implements ResourceBasedOverride {
      */
     public Drawable getIcon(ActivityInfo info, int iconDpi) {
         return getIconWithOverrides(info.applicationInfo.packageName, iconDpi,
-                () -> loadActivityInfoIcon(info, iconDpi), null);
+                () -> loadActivityInfoIcon(info, iconDpi));
     }
 
     @TargetApi(Build.VERSION_CODES.TIRAMISU)
     private Drawable getIconWithOverrides(String packageName, int iconDpi,
-            Supplier<Drawable> fallback, String themedIconPack) {
-        ThemeData td = getThemeDataForPackage(packageName, themedIconPack);
+            Supplier<Drawable> fallback) {
+        ThemeData td = getThemeDataForPackage(packageName);
 
         Drawable icon = null;
         if (mCalendar != null && mCalendar.getPackageName().equals(packageName)) {
@@ -147,7 +147,7 @@ public class IconProvider implements ResourceBasedOverride {
         return icon;
     }
 
-    protected ThemeData getThemeDataForPackage(String packageName, String themedIconPack) {
+    protected ThemeData getThemeDataForPackage(String packageName) {
         return null;
     }
 
@@ -198,7 +198,7 @@ public class IconProvider implements ResourceBasedOverride {
                 }
                 return drawable;
             }
-        } catch (NameNotFoundException e) {
+        } catch (PackageManager.NameNotFoundException e) {
             if (DEBUG) {
                 Log.d(TAG, "Could not get activityinfo or resources for package: "
                         + mCalendar.getPackageName());
-- 
2.43.1
